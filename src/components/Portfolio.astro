---
const portfolio = [
  {
    src: "/img-portfolio/foto-1.webp",
    alt: "Profesional",
    colSpan: 1,
    rowSpan: 2,
  }, // Izquierda arriba
  {
    src: "/img-portfolio/foto-2.webp",
    alt: "Quinceañera",
    colSpan: 2,
    rowSpan: 2,
  }, // Centro arriba
  { src: "/img-portfolio/foto-3.webp", alt: "Boda", colSpan: 1, rowSpan: 4 }, // Derecha (Toda la altura)
  { src: "/img-portfolio/foto-4.webp", alt: "Porsche", colSpan: 2, rowSpan: 2 }, // Centro abajo
  { src: "/img-portfolio/foto-5.webp", alt: "Evento", colSpan: 1, rowSpan: 2 },
  { src: "/img-portfolio/foto-6.webp", alt: "Foto 6", colSpan: 4, rowSpan: 2 },
  { src: "/img-portfolio/foto-7.webp", alt: "Foto 7", colSpan: 4, rowSpan: 2 },
  { src: "/img-portfolio/foto-8.webp", alt: "Foto 8", colSpan: 1, rowSpan: 1 },
  { src: "/img-portfolio/foto-9.webp", alt: "Foto 9", colSpan: 1, rowSpan: 1 },
  {
    src: "/img-portfolio/foto-10.webp",
    alt: "Foto 10",
    colSpan: 2,
    rowSpan: 2, // Aumentado a 2 para que no se corte
  },
  {
    src: "/img-portfolio/foto-11.webp",
    alt: "Foto 11",
    colSpan: 2,
    rowSpan: 3, // Foto principal vertical/grande
  },
  {
    src: "/img-portfolio/foto-12.webp",
    alt: "Foto 12",
    colSpan: 1,
    rowSpan: 2,
  },
  {
    src: "/img-portfolio/foto-13.webp",
    alt: "Foto 13",
    colSpan: 1,
    rowSpan: 2,
  },
  {
    src: "/img-portfolio/foto-14.webp",
    alt: "Foto 14",
    colSpan: 2,
    rowSpan: 2,
  },
  {
    src: "/img-portfolio/foto-15.webp",
    alt: "Foto 15",
    colSpan: 1,
    rowSpan: 2,
  },
  {
    src: "/img-portfolio/foto-16.webp",
    alt: "Foto 16",
    colSpan: 1,
    rowSpan: 2,
  },
  {
    src: "/img-portfolio/foto-17.webp",
    alt: "Foto 17",
    colSpan: 2,
    rowSpan: 3, // Foto destacada
  },
  {
    src: "/img-portfolio/foto-18.webp",
    alt: "Foto 18",
    colSpan: 2,
    rowSpan: 2,
  },
];

const portfolioInicial = portfolio.slice(0, 5);
const portfolioResto = portfolio.slice(5);
---

<section
  class="bg-(--accent-color) text-(--secondary-color) px-4 md:px-8 py-20"
  id="portafolio"
>
  <div class="max-w-6xl mx-auto">
    <h2 class="text-black text-3xl md:text-4xl font-semibold text-center mb-4">
      Visión artística
    </h2>
    <p class="text-(--secondary-color) text-center mb-12">
      Capturando momentos de tranquilidad y grandes emociones.
    </p>

    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8 md:auto-rows-[150px]">
      {
        portfolioInicial.map((image) => (
          <div
            class={`overflow-hidden rounded-xs group aspect-[4/5] md:aspect-auto
            ${image.colSpan === 2 ? "md:col-span-2" : "md:col-span-1"}
            ${image.rowSpan === 4 ? "md:row-span-4" : "md:row-span-2"}
          `}
          >
            <img
              src={image.src}
              alt={image.alt}
              class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
            />
          </div>
        ))
      }
    </div>

    <div id="btn-container" class="flex justify-center mb-12">
      <button
        id="load-more-btn"
        class="border-2 border-solid border-(--secondary-color) px-8 py-3 hover:bg-(--secondary-color) hover:text-(--primary-color) transition-all duration-500"
      >
        Ver Más
      </button>
    </div>

    <div
      id="gallery-rest"
      class="grid grid-cols-1 md:grid-cols-4 gap-4 hidden animate-fade-in-gallery md:auto-rows-[150px]"
    >
      {
        portfolioResto.map((image) => (
          <div
            class={`overflow-hidden rounded-xs group aspect-[4/5] md:aspect-auto
            ${image.colSpan === 2 ? "md:col-span-2" : "md:col-span-1"}
            ${image.rowSpan === 4 ? "md:row-span-4" : image.rowSpan === 3 ? "md:row-span-3" : "md:row-span-2"}
            ${image.rowSpan === 2 ? "md:row-span-2" : "md:row-span-1"}
          `}
          >
            <img
              src={image.src}
              class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
            />
          </div>
        ))
      }
    </div>

    <div id="btn-container-bottom" class="flex justify-center mt-12 hidden">
      <button
        id="load-less-btn"
        class="border-2 border-solid border-(--secondary-color) px-8 py-3 hover:bg-(--secondary-color) hover:text-(--primary-color) transition-all duration-500"
      >
        Ver Menos
      </button>
    </div>
  </div>
</section>

<style>
  @keyframes fadeInGallery {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeOutGallery {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(20px);
    }
  }

  .animate-fade-in-gallery {
    animation: fadeInGallery 600ms ease-out forwards;
  }

  .animate-fade-out-gallery {
    animation: fadeOutGallery 600ms ease-out forwards;
  }
</style>

<script>
  const loadMoreBtn = document.getElementById("load-more-btn");
  const loadLessBtn = document.getElementById("load-less-btn");
  const galleryRest = document.getElementById("gallery-rest");
  const btnContainerTop = document.getElementById("btn-container");
  const btnContainerBottom = document.getElementById("btn-container-bottom");
  let isExpanded = false;

  loadMoreBtn?.addEventListener("click", () => {
    isExpanded = true;
    galleryRest?.classList.remove("hidden");
    galleryRest?.classList.add("animate-fade-in-gallery");
    btnContainerTop?.classList.add("hidden");
    btnContainerBottom?.classList.remove("hidden");
  });

  loadLessBtn?.addEventListener("click", () => {
    isExpanded = false;
    galleryRest?.classList.add("animate-fade-out-gallery");

    // Esperar a que termine la animación antes de ocultar
    setTimeout(() => {
      galleryRest?.classList.add("hidden");
      galleryRest?.classList.remove(
        "animate-fade-out-gallery",
        "animate-fade-in-gallery",
      );
      btnContainerTop?.classList.remove("hidden");
      btnContainerBottom?.classList.add("hidden");
    }, 600);

    // Scroll suave hacia arriba
    window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
